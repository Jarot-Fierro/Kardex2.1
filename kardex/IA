En tu sistema, el eje principal es el Paciente como persona y no la ficha clínica. El paciente representa la identidad única del individuo dentro del sistema, cuyo identificador principal es el RUT. Este registro concentra todos los datos permanentes de la persona: nombres, apellidos, fecha de nacimiento, sexo, género, nacionalidad, dirección, comuna, teléfonos, estado civil, condición de extranjero, pertenencia a pueblo indígena, entre otros. Esta información no depende del establecimiento donde se atienda el paciente; es la base común que debe mantenerse coherente, sin duplicados y actualizada.

Por otro lado, aparece la Ficha clínica, que no es una identidad sino una instancia administrativa de atención ligada a un establecimiento específico. Es decir: una misma persona puede tener una ficha en distintos recintos de salud. Cada ficha relaciona al paciente con un establecimiento, un sector, un profesional tratante, un sistema de previsión, y datos particulares del proceso de atención. Además, genera su propio identificador local, como el numero_ficha_sistema, y guarda fechas propias, observaciones u otros antecedentes que aplican solo a esa atención.

Este diseño obliga a separar correctamente dos cosas que a menudo se mezclan: los datos de identidad versus los datos de atención. Los primeros pertenecen al paciente y deben mantenerse únicos (un RUT = un paciente). Los segundos pertenecen a la ficha y pueden existir múltiples registros dependiendo de cuántas atenciones tenga la persona en diferentes establecimientos. Esta separación es correcta desde el punto de vista del negocio sanitario y evita duplicidades, inconsistencias y pérdidas de información.

El desafío principal de tu sistema surge precisamente en esta intersección entre identidad y ficha. Tú necesitas un formulario único que permita consultar, crear o actualizar, pero sin eliminar, resolviendo tres escenarios muy concretos:

cuando el paciente ya existe y tiene ficha en el establecimiento, cargar toda la información para edición;

cuando el paciente ya existe pero aún no tiene ficha, permitir completar los datos necesarios para crearla;

cuando el paciente no existe en absoluto, permitir registrar al paciente completo y su ficha inicial.
All esto ocurre sobre la base de una búsqueda por RUT en tiempo real, que debe devolver el estado correcto del paciente antes de decidir qué operación ejecutar.

Para lograr lo anterior, te enfrentaste a un segundo reto importante: integrar formularios HTML directos (sin forms.py) con APIs basadas en Django REST Framework. Esto implica gestionar manualmente el mapeo de campos, validar datos desde frontend, consumir endpoints para precargar selects dinámicos (comunas, previsión, sectores, etc.) y sincronizar los valores recibidos en JSON con inputs y selects, incluyendo controles complejos como Select2 y paginación de resultados.

Finalmente, el mayor desafío técnico no está en crear modelos ni vistas aisladas, sino en orquestar correctamente all el flujo: búsqueda remota del paciente, detección de los distintos estados de existencia, carga parcial de datos si corresponde, inicialización dinámica de catálogos grandes (como comunas) vía APIs, y posterior guardado seguro respetando la integridad entre paciente y ficha. all esto debe funcionar de forma fluida para el usuario final, sin generar registros duplicados ni inconsistencias de datos clínicos.