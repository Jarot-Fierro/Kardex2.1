<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Stickers</title>

    <!-- Bootstrap 4 CDN -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">

    <!-- Fuente de código de barras -->
    <link href="https://fonts.googleapis.com/css2?family=Libre+Barcode+39&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: Calibri, sans-serif;
            font-size: 18px; /* texto base más grande */
            margin-top: 10px;
        }

        .sticker {
            height: 185px; /* antes 160px */
            text-align: center;
            box-sizing: border-box;
        }

        .sticker strong {
            font-size: 22px; /* nombres más grandes */
            display: block;
        }

        .sticker div {
            font-size: 18px; /* información adicional más grande */
        }

        .rut {
            font-weight: bold;
            font-size: 20px; /* RUT más grande */
        }

        .barcode {
            max-height: 60px; /* antes 50px */
        }

        @media print {
            .no-print {
                display: none !important;
            }
            .sticker {
                page-break-inside: avoid;
            }
        }
    </style>
</head>
<body>

<!-- Botón para imprimir (no se mostrará en el PDF) -->
<div class="text-center mb-4 no-print">
    <button onclick="window.print()" class="btn btn-primary">
        Guardar como PDF / Imprimir
    </button>
</div>

<div class="container">
    <div class="row">
        <!-- Stickers -->
        {% for i in sticker_range %}
        <div class="col-4">
            <div class="sticker">
                <div>
                    <strong>
                        {{ paciente.nombre }}
                        {{ paciente.apellido_paterno }}
                        {{ paciente.apellido_materno }}
                    </strong>
                </div>
                <div>
                    Fecha Nac.: {{ paciente.fecha_nacimiento|date:"d/m/Y" }} &nbsp;&nbsp;&nbsp;
                    {{ paciente.comuna.nombre }}
                </div>
                <div style="font-size: 20px; font-weight: bold;">
                    FICHA: {{ ficha.numero_ficha }}
                </div>
                <div class="rut">{{ paciente.rut|default:"Sin Rut" }}</div>
                <img class="barcode" src="{{ codigo_barras_base64 }}" alt="Código de barras">
            </div>
        </div>
        {% endfor %}
    </div>
</div>

</body>
</html>
